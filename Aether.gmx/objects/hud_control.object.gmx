<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>&lt;undefined&gt;</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init buttons
for(i = 0; i &lt; 2; i++) {
    for(j = 0; j &lt; 1; j++) {
        button[i, 0] = "";
        button[i, j+1] = -1;
        buttonX[i] = view_wview-192+i*80;
        buttonY[i] = view_hview-96;
        overButton[i] = false;
    }
}

MouseAction = false;
button[0, 0] = "Set Work Area";
button[1, 0] = "Auto Action";
button[1, 1] = false;
selectingArea = false;
selected = false;
x1 = 0;
y1 = 0;
x2 = 0;
y2 = 0;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Init Hotkeys
for(i = 0; i &lt; 10; i++) {
    number[i, 0] = 48+i;
    hotkey[i] = false;
}
number[0, 1] = vk_numpad0;
number[1, 1] = vk_numpad1;
number[2, 1] = vk_numpad2;
number[3, 1] = vk_numpad3;
number[4, 1] = vk_numpad4;
number[5, 1] = vk_numpad5;
number[6, 1] = vk_numpad6;
number[7, 1] = vk_numpad7;
number[8, 1] = vk_numpad8;
number[9, 1] = vk_numpad9;
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Create Controllers
tutorial = instance_create(0,0,TutorialControl);
pause = instance_create(0,0,PauseControl);
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>612</id>
        <kind>0</kind>
        <userelative>0</userelative>
        <isquestion>-1</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>1</exetype>
        <functionname>action_if_variable</functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>0</kind>
            <string>PAUSED</string>
          </argument>
          <argument>
            <kind>0</kind>
            <string>false</string>
          </argument>
          <argument>
            <kind>4</kind>
            <string>0</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>422</id>
        <kind>1</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///HUD Settings and Location
x += (mouse_x - x) * .25;
y += (mouse_y - y) * .25;
view_object = self;
view_hborder = 24;
view_vborder = view_hborder;
depth = room_height*-1;

if(SELECTED_VILLAGER != -1) {
    selected = true;
} else selected = false;

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update button status
for(i = 0; i &lt; array_length_1d(button);i++) {
    var xx = abs(-view_xview[0] + mouse_x - buttonX[i]-32);
    var yy = abs(-view_yview[0] + mouse_y - buttonY[i]-32);
    overButton[i] = (xx &lt; 32 &amp;&amp; yy &lt; 32);
    if(overButton[i]) {
        if(mouse_check_button_released(mb_left)) {
            switch(button[i, 0]) {
                case "Set Work Area":
                    if(SELECTED_VILLAGER != -1) 
                    {
                        selectingArea = true;
                        MouseAction = true;
                    }
                break;
                
                case "Auto Action":
                    if(SELECTED_VILLAGER.ActionAuto) {
                        SELECTED_VILLAGER.ActionAuto = false;
                    } else SELECTED_VILLAGER.ActionAuto = true;
                break;
            }
        }
    }   
}
if(SELECTED_VILLAGER != -1) {
    button[1, 1] = SELECTED_VILLAGER.ActionAuto;
}
if(mouse_check_button_pressed(mb_left)) {
    if(selectingArea) {
        SELECTED_VILLAGER.workArea[0] = mouse_x;
        SELECTED_VILLAGER.workArea[1] = mouse_y;
        selectingArea = false;
        MouseAction = false;
    }
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Update hotkeys
for(i = 0; i &lt; array_length_1d(hotkey);i++) {
    hotkey[i] = (keyboard_check_released(number[i, 0]) || keyboard_check_released(number[i, 1]));
    
    switch(i) {
        case 0: break;
        
        case 1: 
            if(SELECTED_VILLAGER != -1 &amp;&amp; hotkey[i]) 
            {
                selectingArea = true;
                MouseAction = true;
            }
        break;
        
        case 2:
            if(SELECTED_VILLAGER != -1 &amp;&amp; hotkey[i]) {
                if(SELECTED_VILLAGER.ActionAuto) {
                    SELECTED_VILLAGER.ActionAuto = false;
                } else SELECTED_VILLAGER.ActionAuto = true;
            }
        break;
        case 3: break;
        case 4: break;
        case 5: break;
        case 6: break;
        case 7: break;
        case 8: break;
        case 9: break;
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>424</id>
        <kind>2</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>0</useapplyto>
        <exetype>0</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw HUD Backdrop
depth = room_height*-1+1;
draw_set_font(fnt_hud);
var margin = 16;
//Draw Global Inventory HUD

x1 = view_xview+(view_wview-300);
y1 = view_yview;
x2 = x1+300;
y2 = view_yview+view_hview-200-200*selected;

drawHud(x1,y1,x2,y2,margin,.6);
//If there is a selected villager, draw villager inventory
if(selected) drawHud(x1,y2,x2,y2+selected*200,margin,.6);

//Draw HUD object
draw_rectangle(x-2,y-2,x+2,y+2,1);
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Resources
for(var b = 0; b &lt; array_height_2d(global.storage); b++) {
    for (var c = 0; c &lt; array_length_2d(global.storage, b); c++) {
        item[b, c] = global.storage[b,c];
    }
}

//Draw Resource Sprite and Quantity
for(i = 0; i &lt; array_height_2d(item); i++) {
    var buffer = 24;
    var xpos, ypos;
    xpos = x1+i*40+32;
    ypos = y1+buffer;
    draw_sprite(resSet,i,xpos,ypos);
    
    //Measure Total 
    var b, total = 0;
    draw_set_color(c_black);
    for(b = 0; b &lt; array_length_2d(item,i);b++) {
       total += item[i, b];
    }
    draw_text(xpos, ypos, total);
    var xx, yy;
    xx = xpos+16;
    yy = ypos+16;
    over_res[i] = (abs(mouse_x - xx) &lt; 16 &amp;&amp; abs(mouse_y - yy) &lt; 16);
    if(over_res[i]) {
        draw_rectangle(xx-16,yy-16,xx+16,yy+16,1);
        for(var q = 0; q &lt; array_length_2d(item,i);q++) {
            draw_set_color(c_black);
            draw_set_alpha(.4);
            if(string_width(string(item[i, q])) &lt; 13 &amp;&amp; string(item[i, q]) != "0") {
                draw_rectangle(mouse_x,mouse_y+(q*16.5),mouse_x+13,mouse_y+(q+1)*16,0);
            } else if(string(item[i, q]) != "0")
                draw_rectangle(mouse_x,mouse_y+(q*16.5),mouse_x+string_width(string(item[i, q])),mouse_y+(q+1)*16,0);
            draw_set_alpha(1);
            draw_set_color(c_white);
            if(string(item[i, q]) != "0")
                draw_text(mouse_x,mouse_y+q*16,item[i,q]);
        }
    }
}

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Villager Resources
if(SELECTED_VILLAGER != -1) {
    for(var b = 0; b &lt; array_height_2d(SELECTED_VILLAGER.carriedItems); b++) {
        for (var c = 0; c &lt; array_length_2d(SELECTED_VILLAGER.carriedItems, b); c++) {
            villagerItem[b, c] = SELECTED_VILLAGER.carriedItems[b,c];
        }
    }
} else {
    for(var b = 0; b &lt; array_height_2d(global.storage); b++) {
        for (var c = 0; c &lt; array_length_2d(global.storage, b); c++) {
            villagerItem[b, c] = 0;
        }
    }
}

if(SELECTED_VILLAGER != -1) 
{
    //Draw Resource Sprite and Quantity
    for(i = 0; i &lt; array_height_2d(villagerItem); i++) {
        var buffer = 24;
        var xpos = x1+i*40+32, ypos = y2-200+buffer;
        draw_sprite(resSet,i,xpos,ypos);
        
        //Measure Total 
        var b, total = 0;
        draw_set_color(c_black);
        for(b = 0; b &lt; array_length_2d(villagerItem,i);b++) {
           total += villagerItem[i, b];
        }
        
        draw_text(xpos, ypos, total);
        var xx, yy;
        xx = xpos+16;
        yy = ypos+16;
        overVill_res[i] = (abs(mouse_x - xx) &lt; 16 &amp;&amp; abs(mouse_y - yy) &lt; 16);
        if(overVill_res[i]) {
            draw_rectangle(xx-16,yy-16,xx+16,yy+16,1);
            for(var q = 0; q &lt; array_length_2d(villagerItem,i);q++) {
                draw_set_color(c_black);
                draw_set_alpha(.4);
                if(string_width(string(villagerItem[i, q])) &lt; 13 &amp;&amp; string(villagerItem[i, q]) != "0") {
                    draw_rectangle(mouse_x,mouse_y+(q*16.5),mouse_x+13,mouse_y+(q+1)*16,0);
                } else if(string(villagerItem[i, q]) != "0")
                    draw_rectangle(mouse_x,mouse_y+(q*16.5),mouse_x+string_width(string(villagerItem[i, q])),mouse_y+(q+1)*16,0);
                draw_set_alpha(1);
                draw_set_color(c_white);
                if(string(villagerItem[i, q]) != "0")
                    draw_text(mouse_x,mouse_y+q*16,villagerItem[i,q]);
            }
        }
    }
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Villager HUD
if(SELECTED_VILLAGER != -1) {
    for(i = 0; i &lt; array_height_2d(button);i++) {
        var xx1 = view_xview[0]+buttonX[i];
        var yy1 = view_yview[0]+buttonY[i];
        var xx = abs(mouse_x + view_xview[0]-buttonX[i]-32);
        var yy = abs(mouse_y + view_yview[0]-buttonY[i]-32);
        draw_set_alpha(0.5+0.5*overButton[i]);
        draw_sprite(hudButtons, i, xx1, yy1);
        if(button[i, 1] != -1) draw_sprite(hudButtonCheck, button[i, 1], xx1, yy1);
        draw_set_alpha(1);
    }
}

if(selectingArea &amp;&amp; SELECTED_VILLAGER != -1) {
    draw_circle(mouse_x,mouse_y,SELECTED_VILLAGER.workArea[2],1);
}
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Draw Hotkeys (DEBUG)
/*
for(i = 0; i &lt; 10; i++) {
    draw_text(view_xview[0]+view_wview[0]/4*3
             ,view_yview[0]+view_hview[0]/4+(i*48)
             ,"Hotkey " +string(i)+": "+string(hotkey[i]));
}
*/
</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>0</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>0</PhysicsObjectShape>
  <PhysicsObjectDensity>0.5</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>0.100000001490116</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>0.100000001490116</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>0.200000002980232</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints/>
</object>
